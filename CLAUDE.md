# Autocoll 開発ルール

## 🚨 作業開始前に必ず守ること

### 1. SKILL.mdを読む
- 新機能開発前：必ずSKILL.mdを読んでルールを確認
- バグ修正前：既存コードが間違っている可能性を考慮
- 大規模変更前：必ずSKILL.mdに従った計画を立てる

### 2. 変更計画を提示
複数ファイルを変更する場合：
1. 変更が必要なファイルをリストアップ
2. 各ファイルの変更内容を説明
3. ユーザーの承認を得てから実行

### 3. 段階的に実行
- 一度に変更するファイルは3-5個まで
- 変更後は必ず動作確認
- 問題があればすぐに報告

## 📋 必須チェックリスト

### データベース
- [ ] psycopg3（`psycopg`）を使用
- [ ] `get_db()`で接続取得
- [ ] **すべてのテーブルに`store_id`が必要**（usersテーブルも例外ではない）
- [ ] `WHERE store_id = %s`でフィルタ

### ルート定義
- [ ] 個別関数として定義
- [ ] `main.py`でインポート＆ルート登録
- [ ] `register_XXX_routes(app)`形式は使わない

### デザイン
- [ ] 既存ページ（オプション管理など）と同じデザイン
- [ ] メインカラー`#00BCD4`を使用
- [ ] SKILL.mdのデザイン規約に従う

## 🚫 禁止事項

- ❌ SKILL.mdを読まずに新機能を実装
- ❌ store_idフィルタを忘れる
- ❌ 全店舗共通のテーブルを作る

## 📚 参考ドキュメント

詳細は `/SKILL.md` を参照してください。
