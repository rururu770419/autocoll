{% extends "cast/cast_base.html" %}

{% block title %}ãƒ–ãƒ­ã‚°ä¸‹æ›¸ãä¸€è¦§ - ã‚­ãƒ£ã‚¹ãƒˆãƒã‚¤ãƒšãƒ¼ã‚¸{% endblock %}

{% block content %}
<div class="cm-drafts-container">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="cm-drafts-header">
        <h2>ğŸ“ ãƒ–ãƒ­ã‚°ä¸‹æ›¸ãä¸€è¦§</h2>
        <a href="{{ url_for('cast_mypage.blog_draft_new', store=store) }}" class="cm-btn-new-draft">
            â• æ–°è¦ä½œæˆ
        </a>
    </div>

    {% if drafts and drafts|length > 0 %}
        <!-- ä¸‹æ›¸ãã‚«ãƒ¼ãƒ‰ã‚°ãƒªãƒƒãƒ‰ -->
        <div class="cm-drafts-grid">
            {% for draft in drafts %}
            <div class="cm-draft-card">
                <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
                <h3 class="cm-draft-title">{{ draft.title }}</h3>
                
                <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
                <div class="cm-draft-content-preview">
                    {{ draft.content|striptags|truncate(100) }}
                </div>
                
                <!-- ãƒ¡ã‚¿æƒ…å ± -->
                <div class="cm-draft-meta">
                    <span class="cm-draft-date">
                        ğŸ•’ {{ draft.updated_at.strftime('%Yå¹´%mæœˆ%dæ—¥ %H:%M') if draft.updated_at else 'æ—¥æ™‚ä¸æ˜' }}
                    </span>
                </div>
                
                <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="cm-draft-actions">
                    <a href="{{ url_for('cast_mypage.blog_draft_edit', store=store, draft_id=draft.draft_id) }}" 
                       class="cm-btn cm-btn-edit">
                        âœï¸ ç·¨é›†
                    </a>
                    <form method="POST" 
                          action="{{ url_for('cast_mypage.blog_draft_delete', store=store, draft_id=draft.draft_id) }}" 
                          style="flex: 1;"
                          onsubmit="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
                        <button type="submit" class="cm-btn cm-btn-delete" style="width: 100%;">
                            ğŸ—‘ï¸ å‰Šé™¤
                        </button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <!-- ä¸‹æ›¸ããŒ0ä»¶ã®å ´åˆ -->
        <div class="cm-no-drafts">
            <div class="cm-no-drafts-icon">ğŸ“</div>
            <h3>ä¸‹æ›¸ããŒã¾ã ã‚ã‚Šã¾ã›ã‚“</h3>
            <p>æ–°ã—ã„ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†</p>
            <a href="{{ url_for('cast_mypage.blog_draft_new', store=store) }}" class="cm-btn-new-draft">
                â• æœ€åˆã®ä¸‹æ›¸ãã‚’ä½œæˆ
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}