{% extends "base.html" %}

{% block extra_head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/reservation_list.css') }}">
<!-- flatpickr CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
{% endblock %}

{% block title %}予約一覧 | {{ display_name }}{% endblock %}

{% block content %}
<div class="reservation-list-container">
    <!-- カレンダー部分 -->
    <div class="calendar-section">
        <!-- 日付ピッカートリガー -->
        <button class="calendar-date-item date-picker-trigger" id="date-picker-trigger">
            2025年10月19日
        </button>

        <button class="calendar-nav-btn" id="prev-week">
            <i class="fas fa-chevron-left"></i>
        </button>

        <div class="calendar-dates" id="calendar-dates">
            <!-- JavaScriptで動的に生成 -->
        </div>

        <button class="calendar-nav-btn" id="next-week">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>

    <!-- 予約一覧テーブル -->
    <div class="table-container">
        <table class="reservation-table">
            <thead>
                <tr>
                    <th>編集</th>
                    <th>時間</th>
                    <th>キャスト</th>
                    <th>コース</th>
                    <th>お客様</th>
                    <th>指名</th>
                    <th>ホテル</th>
                    <th>部屋番号</th>
                    <th>入室</th>
                    <th>退室</th>
                    <th class="center-align">延長</th>
                    <th class="center-align">合計金額</th>
                    <th class="center-align change-column" id="amount-received-header" style="display: none;">預かり金額</th>
                    <th class="center-align change-column" id="change-amount-header" style="display: none;">お釣り</th>
                    <th>オプション</th>
                    <th class="center-align">OP金額</th>
                    <th class="center-align">割引</th>
                    <th class="center-align">追加PT</th>
                </tr>
            </thead>
            <tbody id="reservation-tbody">
                <!-- JavaScriptで動的に生成 -->
                <tr>
                    <td colspan="18" class="loading-cell">読み込み中...</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
// サーバーから渡された初期日付
window.initialDate = '{{ target_date }}';
window.storeName = '{{ store }}';
</script>
<!-- flatpickr JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>
<script src="{{ url_for('static', filename='js/reservation_list.js') }}"></script>
{% endblock %}
