{% extends "base.html" %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/staff_management.css') }}">
{% endblock %}

{% block title %}
  ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ | {{ display_name }}
{% endblock %}

{% block content %}
<div class="container">
  <h1>ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†</h1>

  {% if success %}
    <div class="alert alert-success">{{ success }}</div>
  {% endif %}
  {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
  {% endif %}

  <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
  <div class="staff-list-actions">
    <a href="{{ url_for('main_routes.new_staff', store=store) }}" class="btn btn-success">
      + æ–°è¦ã‚¹ã‚¿ãƒƒãƒ•ç™»éŒ²
    </a>
    <div class="staff-list-summary">
      ç™»éŒ²ã‚¹ã‚¿ãƒƒãƒ•æ•°: <strong>{{ users|length }}å</strong>
    </div>
  </div>

  <!-- ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ« -->
  <div class="table-responsive">
    {% if users %}
      <table class="table table-striped staff-list-table">
        <thead>
          <tr>
            <th class="staff-table-name">åå‰</th>
            <th class="staff-table-color">ã‚«ãƒ©ãƒ¼</th>
            <th class="staff-table-login">ãƒ­ã‚°ã‚¤ãƒ³ID</th>
            <th class="staff-table-role">æ¨©é™</th>
            <th class="staff-table-line">LINEé€£æº</th>
            <th class="staff-table-notification">é€šçŸ¥è¨­å®š</th>
            <th class="staff-table-time">é€šçŸ¥æ™‚é–“</th>
            <th class="staff-table-actions">æ“ä½œ</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr class="staff-list-row">
            <td class="staff-name-cell">
              <strong>{{ user.name }}</strong>
            </td>
            <td class="staff-color-cell">
              {% set color_value = user.color if user.color else '#FFE5E5' %}
              <div class="staff-color-display">
                <div class="staff-color-box" style="background-color: {{ color_value }};"></div>
                <span class="staff-color-text">{{ color_value }}</span>
              </div>
            </td>
            <td class="staff-login-cell">{{ user.login_id }}</td>
            <td class="staff-role-cell">
              <span class="staff-role-badge staff-role-{{ 'driver' if user.role == 'ãƒ‰ãƒ©ã‚¤ãƒãƒ¼' else 'staff' }}">
                {{ user.role }}
              </span>
            </td>
            <td class="staff-line-status-cell">
              {% if user.line_id %}
                <span class="line-status-connected">âœ“ é€£æºæ¸ˆã¿</span>
              {% else %}
                <span class="line-status-not-connected">æœªè¨­å®š</span>
              {% endif %}
            </td>
            <td class="staff-notification-cell">
              {% if user.line_notification_enabled %}
                <span class="notification-enabled">ğŸ”” ON</span>
              {% else %}
                <span class="notification-disabled">ğŸ”• OFF</span>
              {% endif %}
            </td>
            <td class="staff-notification-time-cell">
              <span class="notification-time">{{ user.notification_minutes_before }}åˆ†å‰</span>
            </td>
            <td class="staff-actions-cell">
              <a href="{{ url_for('main_routes.edit_staff_by_id', store=store, user_id=user.id) }}" class="btn btn-edit">ç·¨é›†</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      
      <!-- LINEé€šçŸ¥ã«é–¢ã™ã‚‹èª¬æ˜ -->
      <div class="staff-line-info">
        <h3 class="staff-line-info-title">ğŸ’¬ LINEé€šçŸ¥æ©Ÿèƒ½ã«ã¤ã„ã¦</h3>
        <ul class="staff-line-info-list">
          <li>å„ã‚¹ã‚¿ãƒƒãƒ•ãŒå€‹åˆ¥ã«LINE Botã‚’å‹ã ã¡è¿½åŠ ã—ã¦è¨­å®šã§ãã¾ã™</li>
          <li>é€è¿æ™‚é–“ã®æŒ‡å®šåˆ†å‰ã«è‡ªå‹•é€šçŸ¥ã•ã‚Œã¾ã™</li>
          <li>é€šçŸ¥æ™‚é–“ã¯å€‹åˆ¥ã«è¨­å®šå¯èƒ½ã§ã™ï¼ˆ10åˆ†å‰ã€15åˆ†å‰ãªã©ï¼‰</li>
          <li>é€šçŸ¥ã®ON/OFFåˆ‡ã‚Šæ›¿ãˆã‚‚å€‹åˆ¥ã«è¨­å®šã§ãã¾ã™</li>
        </ul>
      </div>
      
    {% else %}
      <div class="staff-empty-state">
        <div class="staff-empty-icon">ğŸ‘¥</div>
        <h3 class="staff-empty-title">ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚¿ãƒƒãƒ•ã¯ã„ã¾ã›ã‚“</h3>
        <p class="staff-empty-text">æ–°è¦ã‚¹ã‚¿ãƒƒãƒ•ç™»éŒ²ã‹ã‚‰å§‹ã‚ã¦ãã ã•ã„</p>
        <a href="{{ url_for('main_routes.new_staff', store=store) }}" class="btn btn-success">æœ€åˆã®ã‚¹ã‚¿ãƒƒãƒ•ã‚’ç™»éŒ²ã™ã‚‹</a>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}